"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,r=require("react"),t=(e=r)&&"object"==typeof e&&"default"in e?e.default:e,n=require("windowed-observable");function u(){return(u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}exports.createReactObservable=function(e,a){var i=new n.Observable(e),s=r.createContext(void 0),o=function(e){var n=e.children,o=e.onChange,b=r.useState({data:null==a?void 0:a.initialData,events:[],lastEvent:void 0}),v=b[0],l=b[1];r.useEffect((function(){var e=function(e,r){l({data:e,events:r.events,lastEvent:r.lastEvent})};return i.subscribe(e),function(){i.unsubscribe(e)}}),[]),r.useEffect((function(){if(o)return i.subscribe(o),function(){i.unsubscribe(o)}}),[o]);var c=r.useMemo((function(){return u({},v,{publish:i.publish})}),[v]);return t.createElement(s.Provider,{value:c},n)};return o.displayName="ObservableProvider",{observable:i,useObservable:function(){var e=r.useContext(s);if(void 0===e)throw new Error("useObservable must be used within an ObservableProvider");var t=e.publish;return[function(e,r){if(null==e)return{};var t,n,u={},a=Object.keys(e);for(n=0;n<a.length;n++)r.indexOf(t=a[n])>=0||(u[t]=e[t]);return u}(e,["publish"]),t]},ObservableProvider:o}};
//# sourceMappingURL=react-windowed-observable.cjs.production.min.js.map
